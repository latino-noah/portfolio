<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üç™ Cookie Empire üç™</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #0f0f1e 0%, #1a1a2e 50%, #16213e 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #e0e0e0;
      overflow-x: hidden;
      padding: 10px;
    }

    #game {
      display: grid;
      grid-template-columns: 1fr 1.5fr;
      gap: 20px;
      max-width: 1600px;
      width: 100%;
      height: 95vh;
      padding: 0;
    }

    .panel {
      background: rgba(30,30,46,0.95);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
    }

    #clickArea {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: 100%;
    }

    #stats {
      text-align: center;
      margin-bottom: 0;
    }

    #timer {
      font-size: 22px;
      color: #fbbf24;
      font-weight: bold;
      margin-bottom: 12px;
      text-shadow: 0 0 15px rgba(251,191,36,0.5);
      padding: 10px 20px;
      background: rgba(251,191,36,0.1);
      border-radius: 12px;
      display: inline-block;
    }

    #timer.warning {
      color: #ef4444;
      animation: pulse-timer 0.5s infinite;
      background: rgba(239,68,68,0.1);
    }

    @keyframes pulse-timer {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    #cookieCount {
      font-size: 42px;
      font-weight: bold;
      color: #fbbf24;
      text-shadow: 0 0 20px rgba(251,191,36,0.5);
      margin-bottom: 10px;
    }

    #cps {
      font-size: 20px;
      color: #34d399;
      font-weight: bold;
    }

    .cookie-button-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #cookieBtn {
      width: 220px;
      height: 220px;
      border: none;
      border-radius: 50%;
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      font-size: 110px;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(217,119,6,0.6), 0 0 40px rgba(251,191,36,0.3);
      transition: transform 0.1s, box-shadow 0.1s;
      position: relative;
      overflow: hidden;
    }

    #cookieBtn:hover {
      transform: scale(1.05);
      box-shadow: 0 15px 40px rgba(217,119,6,0.8), 0 0 60px rgba(251,191,36,0.5);
    }

    #cookieBtn:active {
      transform: scale(0.95);
    }

    #cookieBtn::before {
      content: '';
      position: absolute;
      top: 20%;
      left: 30%;
      width: 30px;
      height: 30px;
      background: #f59e0b;
      border-radius: 50%;
      opacity: 0.6;
    }

    #cookieBtn::after {
      content: '';
      position: absolute;
      top: 50%;
      right: 25%;
      width: 25px;
      height: 25px;
      background: #ec4899;
      border-radius: 50%;
      opacity: 0.6;
    }

    #multiplier {
      font-size: 18px;
      color: #a78bfa;
      font-weight: bold;
      margin-top: 10px;
    }

    .bottom-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-top: auto;
    }

    #shopArea {
      display: flex;
      flex-direction: column;
      height: 100%;
      overflow: hidden;
    }

    #shopArea h2 {
      margin-bottom: 15px;
      flex-shrink: 0;
    }

    #upgrades {
      flex: 1;
      overflow-y: auto;
      padding-right: 5px;
      scrollbar-width: thin;
      scrollbar-color: #fbbf24 #374151;
    }

    #upgrades::-webkit-scrollbar {
      width: 8px;
    }

    #upgrades::-webkit-scrollbar-track {
      background: #374151;
      border-radius: 10px;
    }

    #upgrades::-webkit-scrollbar-thumb {
      background: #fbbf24;
      border-radius: 10px;
    }

    h2 {
      color: #f3f4f6;
      margin-bottom: 15px;
      font-size: 24px;
      text-align: center;
      text-shadow: 0 0 10px rgba(251,191,36,0.3);
    }

    .upgrade {
      background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
      border-radius: 14px;
      padding: 14px;
      margin-bottom: 12px;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid rgba(255,255,255,0.1);
      position: relative;
      overflow: hidden;
    }

    .upgrade:hover {
      transform: translateX(8px) scale(1.02);
      border-color: #fbbf24;
      box-shadow: 0 5px 15px rgba(251,191,36,0.3);
    }

    .upgrade.affordable {
      background: linear-gradient(135deg, #065f46 0%, #047857 100%);
      border-color: #34d399;
      box-shadow: 0 0 15px rgba(52,211,153,0.2);
    }

    .upgrade.affordable:hover {
      box-shadow: 0 5px 20px rgba(52,211,153,0.4);
    }

    .upgrade.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .upgrade-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .upgrade-name {
      font-size: 17px;
      font-weight: bold;
      color: #f3f4f6;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .upgrade-icon {
      font-size: 22px;
    }

    .upgrade-count {
      background: #fbbf24;
      color: #1a1a2e;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: bold;
    }

    .upgrade-desc {
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 8px;
    }

    .upgrade-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .upgrade-cost {
      font-size: 15px;
      font-weight: bold;
      color: #fbbf24;
    }

    .upgrade-production {
      font-size: 13px;
      color: #34d399;
      font-weight: bold;
    }

    .particle {
      position: fixed;
      pointer-events: none;
      font-size: 24px;
      font-weight: bold;
      color: #fbbf24;
      text-shadow: 0 0 10px rgba(251,191,36,0.8);
      animation: float-up 1s forwards;
      z-index: 1000;
    }

    @keyframes float-up {
      0% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
      100% {
        opacity: 0;
        transform: translateY(-100px) scale(1.5);
      }
    }

    .achievement {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: white;
      padding: 15px 25px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(245,158,11,0.5);
      animation: slideIn 0.5s, slideOut 0.5s 2.5s forwards;
      z-index: 2000;
      font-weight: bold;
      font-size: 16px;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes slideOut {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(400px);
        opacity: 0;
      }
    }

    #prestige {
      padding: 18px;
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
      border-radius: 14px;
      text-align: center;
      color: white;
      border: 1px solid rgba(52,211,153,0.3);
      box-shadow: 0 5px 20px rgba(5,150,105,0.3);
    }

    #prestige h3 {
      margin-bottom: 10px;
      font-size: 17px;
    }

    #prestige p {
      font-size: 13px;
      margin: 5px 0;
    }

    #prestige button {
      background: white;
      color: #047857;
      border: none;
      padding: 11px 26px;
      border-radius: 22px;
      font-size: 15px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 10px;
    }

    #prestige button:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    #prestige button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    #statsPanel {
      padding: 18px;
      background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.1);
    }

    #statsPanel h3 {
      color: #fbbf24;
      margin-bottom: 14px;
      font-size: 17px;
      text-align: center;
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      margin: 8px 0;
      font-size: 13px;
    }

    .stat-row .label {
      color: #9ca3af;
    }

    .stat-row .value {
      color: #f3f4f6;
      font-weight: bold;
    }

    @media (max-width: 1400px) {
      #game {
        grid-template-columns: 1fr;
        height: auto;
        gap: 15px;
      }

      #clickArea {
        align-items: center;
        gap: 20px;
      }

      .bottom-section {
        width: 100%;
      }

      #shopArea {
        max-height: 60vh;
      }
    }

    @media (max-width: 768px) {
      #game {
        height: auto;
        padding: 10px;
      }

      #clickArea {
        padding: 20px;
      }

      #cookieBtn {
        width: 180px;
        height: 180px;
        font-size: 90px;
      }

      #cookieCount {
        font-size: 32px;
      }

      .bottom-section {
        grid-template-columns: 1fr;
      }

      #shopArea {
        max-height: 50vh;
      }
    }

    .timer-select-screen {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      animation: fadeIn 0.3s;
      padding: 20px;
      overflow-y: auto;
    }

    .timer-select-screen.hidden {
      display: none;
    }

    .timer-select-content {
      background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
      padding: 40px;
      border-radius: 30px;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      border: 2px solid rgba(251, 191, 36, 0.3);
      max-width: 650px;
      width: 100%;
      max-height: 95vh;
      overflow-y: auto;
      position: relative;
    }

    .timer-select-content::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(251, 191, 36, 0.1) 0%, transparent 70%);
      animation: pulse-bg 3s ease-in-out infinite;
    }

    @keyframes pulse-bg {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }

    .timer-select-title {
      font-size: 60px;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
      animation: float-title 3s ease-in-out infinite;
    }

    @keyframes float-title {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    .game-title-text {
      font-size: 44px;
      font-weight: bold;
      background: linear-gradient(135deg, #fbbf24, #f59e0b, #fbbf24);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradient-shift 3s ease infinite;
      text-shadow: 0 0 30px rgba(251, 191, 36, 0.5);
      margin-bottom: 12px;
      position: relative;
      z-index: 1;
    }

    @keyframes gradient-shift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .timer-select-subtitle {
      font-size: 18px;
      color: #9ca3af;
      margin-bottom: 12px;
      position: relative;
      z-index: 1;
    }

    .game-features {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 25px;
      position: relative;
      z-index: 1;
    }

    .game-feature {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
    }

    .feature-icon {
      font-size: 30px;
      filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.5));
      animation: bounce-icon 2s ease-in-out infinite;
    }

    .game-feature:nth-child(2) .feature-icon {
      animation-delay: 0.3s;
    }

    .game-feature:nth-child(3) .feature-icon {
      animation-delay: 0.6s;
    }

    @keyframes bounce-icon {
      0%, 100% { transform: translateY(0px) scale(1); }
      50% { transform: translateY(-8px) scale(1.1); }
    }

    .feature-text {
      font-size: 12px;
      color: #d1d5db;
      font-weight: 600;
    }

    .timer-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-bottom: 20px;
      position: relative;
      z-index: 1;
    }

    .timer-option {
      background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
      border: 3px solid rgba(251, 191, 36, 0.3);
      border-radius: 18px;
      padding: 20px 15px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 16px;
      color: white;
      position: relative;
      overflow: hidden;
    }

    .timer-option::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(251, 191, 36, 0.2), transparent);
      transition: left 0.5s;
    }

    .timer-option:hover::before {
      left: 100%;
    }

    .timer-option:hover {
      transform: translateY(-8px) scale(1.02);
      border-color: rgba(251, 191, 36, 0.8);
      box-shadow: 0 15px 40px rgba(251, 191, 36, 0.4);
    }

    .timer-option-time {
      font-size: 42px;
      font-weight: bold;
      color: #fbbf24;
      display: block;
      margin-bottom: 8px;
      text-shadow: 0 0 20px rgba(251, 191, 36, 0.6);
    }

    .timer-option-label {
      font-size: 14px;
      color: #9ca3af;
      font-weight: 600;
    }

    .custom-timer-input {
      margin-top: 15px;
      padding: 18px;
      background: rgba(251, 191, 36, 0.1);
      border-radius: 18px;
      border: 2px solid rgba(251, 191, 36, 0.3);
      position: relative;
      z-index: 1;
    }

    .custom-timer-input input {
      width: 100px;
      padding: 14px;
      font-size: 22px;
      text-align: center;
      border: 2px solid rgba(251, 191, 36, 0.5);
      border-radius: 10px;
      background: #1f2937;
      color: #fbbf24;
      font-weight: bold;
      margin: 0 8px;
      transition: all 0.3s;
    }

    .custom-timer-input input:focus {
      outline: none;
      border-color: #fbbf24;
      box-shadow: 0 0 20px rgba(251, 191, 36, 0.4);
    }

    .custom-timer-input label {
      color: #d1d5db;
      font-size: 16px;
      font-weight: 600;
    }

    .start-game-btn {
      background: linear-gradient(135deg, #fbbf24, #f59e0b);
      color: #1a1a2e;
      border: none;
      padding: 16px 45px;
      font-size: 22px;
      border-radius: 18px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 10px 30px rgba(251, 191, 36, 0.4);
      transition: all 0.3s;
      margin-top: 20px;
      position: relative;
      z-index: 1;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      overflow: hidden;
    }

    .start-game-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s;
    }

    .start-game-btn:hover::before {
      left: 100%;
    }

    .start-game-btn:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 15px 40px rgba(251, 191, 36, 0.6);
    }

    .start-game-btn:active {
      transform: translateY(-2px) scale(1.02);
    }

    .game-over-screen {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.95);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      animation: fadeIn 0.5s;
    }

    .game-over-screen.show {
      display: flex;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .game-over-content {
      background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
      border-radius: 20px;
      padding: 40px;
      text-align: center;
      border: 2px solid #fbbf24;
      box-shadow: 0 0 50px rgba(251,191,36,0.5);
      max-width: 500px;
      width: 90%;
    }

    .game-over-content h1 {
      font-size: 48px;
      color: #fbbf24;
      margin-bottom: 20px;
      text-shadow: 0 0 20px rgba(251,191,36,0.8);
    }

    .game-over-content h2 {
      font-size: 32px;
      color: #f3f4f6;
      margin-bottom: 30px;
    }

    .final-stats {
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
      padding: 20px;
      margin: 20px 0;
    }

    .final-stat {
      display: flex;
      justify-content: space-between;
      margin: 12px 0;
      font-size: 18px;
    }

    .final-stat .label {
      color: #9ca3af;
    }

    .final-stat .value {
      color: #fbbf24;
      font-weight: bold;
      font-size: 20px;
    }

    .restart-btn {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: #1a1a2e;
      border: none;
      padding: 15px 40px;
      border-radius: 30px;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
      transition: all 0.3s;
      box-shadow: 0 5px 20px rgba(251,191,36,0.4);
    }

    .restart-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(251,191,36,0.6);
    }
  </style>
</head>
<body>
  <!-- Timer Selection Screen -->
  <div id="timerSelectScreen" class="timer-select-screen">
    <div class="timer-select-content">
      <div class="timer-select-title">üç™</div>
      <div class="game-title-text">Cookie Empire</div>
      <div class="timer-select-subtitle">Choose your play time</div>
      
      <div class="game-features">
        <div class="game-feature">
          <div class="feature-icon">üëÜ</div>
          <div class="feature-text">Click & Collect</div>
        </div>
        <div class="game-feature">
          <div class="feature-icon">‚ö°</div>
          <div class="feature-text">Upgrades</div>
        </div>
        <div class="game-feature">
          <div class="feature-icon">‚è±Ô∏è</div>
          <div class="feature-text">Time Limit</div>
        </div>
      </div>
      
      <div class="timer-options">
        <div class="timer-option" onclick="selectTime(30)">
          <span class="timer-option-time">30s</span>
          <span class="timer-option-label">Quick Round</span>
        </div>
        <div class="timer-option" onclick="selectTime(60)">
          <span class="timer-option-time">1:00</span>
          <span class="timer-option-label">Short Game</span>
        </div>
        <div class="timer-option" onclick="selectTime(120)">
          <span class="timer-option-time">2:00</span>
          <span class="timer-option-label">Normal</span>
        </div>
        <div class="timer-option" onclick="selectTime(300)">
          <span class="timer-option-time">5:00</span>
          <span class="timer-option-label">Long Game</span>
        </div>
      </div>

      <div class="custom-timer-input">
        <label>Or choose custom time:</label>
        <input type="number" id="customMinutes" min="1" max="60" value="2" />
        <label>minutes</label>
      </div>

      <button class="start-game-btn" onclick="startGameWithCustomTime()">
        üéÆ Start Game
      </button>
    </div>
  </div>

  <div id="game">
    <div id="clickArea" class="panel">
      <div id="stats">
        <div id="timer">‚è±Ô∏è Time: <span id="timerValue">2:00</span></div>
        <div id="cookieCount">0 üç™</div>
        <div id="cps">0 per second</div>
        <div id="multiplier">√ó1 per click</div>
      </div>
      <div class="cookie-button-container">
        <button id="cookieBtn">üç™</button>
      </div>
      <div class="bottom-section">
        <div id="statsPanel">
          <h3>üìä Statistics</h3>
          <div class="stat-row">
            <span class="label">Total earned:</span>
            <span class="value" id="totalEarned">0 üç™</span>
          </div>
          <div class="stat-row">
            <span class="label">Total clicked:</span>
            <span class="value" id="totalClicks">0</span>
          </div>
          <div class="stat-row">
            <span class="label">Best run:</span>
            <span class="value" id="bestRun">0 üç™</span>
          </div>
          <div class="stat-row">
            <span class="label">Cookies/click:</span>
            <span class="value" id="perClickStat">1</span>
          </div>
          <div class="stat-row">
            <span class="label">Upgrades bought:</span>
            <span class="value" id="upgradesBought">0</span>
          </div>
        </div>
        <div id="prestige">
          <h3>‚≠ê Prestige ‚≠ê</h3>
          <p>Reset everything for permanent multiplier!</p>
          <p id="prestigeInfo">Prestige Points: <strong>0</strong></p>
          <p id="nextPrestige">Next at: <strong>1,000,000</strong> cookies</p>
          <button id="prestigeBtn" disabled>Prestige (+1 point)</button>
        </div>
      </div>
    </div>

    <div id="shopArea" class="panel">
      <h2>üè™ Upgrades Shop</h2>
      <div id="upgrades"></div>
    </div>
  </div>

  <div class="game-over-screen" id="gameOverScreen">
    <div class="game-over-content">
      <h1>‚è∞ TIME'S UP! ‚è∞</h1>
      <h2>Your Final Score</h2>
      <div class="final-stats">
        <div class="final-stat">
          <span class="label">Cookies earned:</span>
          <span class="value" id="finalCookies">0 üç™</span>
        </div>
        <div class="final-stat">
          <span class="label">Total clicked:</span>
          <span class="value" id="finalClickCount">0</span>
        </div>
        <div class="final-stat">
          <span class="label">Cookies per second:</span>
          <span class="value" id="finalCPS">0/s</span>
        </div>
        <div class="final-stat">
          <span class="label">Upgrades bought:</span>
          <span class="value" id="finalUpgrades">0</span>
        </div>
        <div class="final-stat">
          <span class="label">Prestige Level:</span>
          <span class="value" id="finalPrestige">0 ‚≠ê</span>
        </div>
      </div>
      <button class="restart-btn" id="restartGame">üîÑ Play Again</button>
    </div>
  </div>

  <script>
    // Game state
    let cookies = 0;
    let cookiesPerClick = 1;
    let cookiesPerSecond = 0;
    let prestigePoints = 0;
    let totalCookiesAllTime = 0;
    let totalClicks = 0;
    let bestRun = 0;
    let upgradesBought = 0;
    let timeLeft = 120; // 2 minutes in seconds
    let gameActive = false; // Start inactive until timer is selected
    let timerInterval = null;
    let selectedTime = 120; // Default 2 minutes

    // Upgrades data
    const upgradeTypes = [
      {
        id: 'cursor',
        name: 'Cursor',
        icon: 'üëÜ',
        baseCost: 15,
        baseProduction: 0.1,
        description: 'Auto-clicks for you',
        count: 0
      },
      {
        id: 'grandma',
        name: 'Grandma',
        icon: 'üëµ',
        baseCost: 100,
        baseProduction: 1,
        description: 'Bakes cookies for you',
        count: 0
      },
      {
        id: 'farm',
        name: 'Cookie Farm',
        icon: 'üåæ',
        baseCost: 1100,
        baseProduction: 8,
        description: 'Grows cookie ingredients',
        count: 0
      },
      {
        id: 'mine',
        name: 'Cookie Mine',
        icon: '‚õèÔ∏è',
        baseCost: 12000,
        baseProduction: 47,
        description: 'Mines chocolate chips',
        count: 0
      },
      {
        id: 'factory',
        name: 'Cookie Factory',
        icon: 'üè≠',
        baseCost: 130000,
        baseProduction: 260,
        description: 'Mass produces cookies',
        count: 0
      },
      {
        id: 'bank',
        name: 'Cookie Bank',
        icon: 'üè¶',
        baseCost: 1400000,
        baseProduction: 1400,
        description: 'Invests in cookies',
        count: 0
      },
      {
        id: 'temple',
        name: 'Cookie Temple',
        icon: 'üõï',
        baseCost: 20000000,
        baseProduction: 7800,
        description: 'Deifies the cookie',
        count: 0
      },
      {
        id: 'wizard',
        name: 'Cookie Wizard',
        icon: 'üßô',
        baseCost: 330000000,
        baseProduction: 44000,
        description: 'Conjures cookies from thin air',
        count: 0
      },
      {
        id: 'portal',
        name: 'Cookie Portal',
        icon: 'üåÄ',
        baseCost: 5100000000,
        baseProduction: 260000,
        description: 'Brings cookies from other dimensions',
        count: 0
      },
      {
        id: 'timemachine',
        name: 'Time Machine',
        icon: '‚è∞',
        baseCost: 75000000000,
        baseProduction: 1650000,
        description: 'Brings cookies from the future',
        count: 0
      }
    ];

    // Click multiplier upgrades
    const clickUpgrades = [
      { id: 'click1', name: 'Better Click', cost: 100, multiplier: 2, bought: false },
      { id: 'click2', name: 'Super Click', cost: 1000, multiplier: 5, bought: false },
      { id: 'click3', name: 'Mega Click', cost: 10000, multiplier: 10, bought: false },
      { id: 'click4', name: 'Ultra Click', cost: 100000, multiplier: 25, bought: false },
      { id: 'click5', name: 'God Click', cost: 1000000, multiplier: 50, bought: false }
    ];

    // Achievements
    const achievements = [
      { cookies: 100, text: 'üéâ 100 Cookies!' },
      { cookies: 1000, text: 'üöÄ 1,000 Cookies!' },
      { cookies: 10000, text: 'üíé 10,000 Cookies!' },
      { cookies: 100000, text: 'üëë 100,000 Cookies!' },
      { cookies: 1000000, text: 'üåü 1 MILLION Cookies!' },
      { cookies: 10000000, text: 'üî• 10 MILLION Cookies!' },
      { cookies: 100000000, text: '‚ö° 100 MILLION Cookies!' }
    ];
    let achievementsUnlocked = [];

    // Load saved game
    function loadGame() {
      const saved = localStorage.getItem('cookieEmpire');
      if (saved) {
        const data = JSON.parse(saved);
        totalCookiesAllTime = data.totalCookiesAllTime || 0;
        prestigePoints = data.prestigePoints || 0;
        achievementsUnlocked = data.achievementsUnlocked || [];
        totalClicks = data.totalClicks || 0;
        bestRun = data.bestRun || 0;
        
        calculateCPS();
        calculateClickPower();
      }
    }

    // Save game
    function saveGame() {
      const data = {
        totalCookiesAllTime,
        prestigePoints,
        achievementsUnlocked,
        totalClicks,
        bestRun
      };
      localStorage.setItem('cookieEmpire', JSON.stringify(data));
    }

    // Format numbers
    function formatNumber(num) {
      if (num >= 1e12) return (num / 1e12).toFixed(2) + 'T';
      if (num >= 1e9) return (num / 1e9).toFixed(2) + 'B';
      if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';
      if (num >= 1e3) return (num / 1e3).toFixed(2) + 'K';
      return Math.floor(num).toLocaleString('en-US');
    }

    // Format time
    function formatTime(seconds) {
      const hours = Math.floor(seconds / 3600);
      const minutes = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;
      
      if (hours > 0) {
        return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      }
      return `${minutes}:${secs.toString().padStart(2, '0')}`;
    }

    // Calculate cost with exponential scaling
    function calculateCost(baseCost, count) {
      return Math.floor(baseCost * Math.pow(1.15, count));
    }

    // Calculate CPS
    function calculateCPS() {
      cookiesPerSecond = 0;
      upgradeTypes.forEach(upgrade => {
        const production = upgrade.baseProduction * upgrade.count;
        cookiesPerSecond += production;
      });
      // Prestige multiplier
      cookiesPerSecond *= (1 + prestigePoints * 0.5);
    }

    // Calculate click power
    function calculateClickPower() {
      cookiesPerClick = 1;
      clickUpgrades.forEach(upgrade => {
        if (upgrade.bought) {
          cookiesPerClick *= upgrade.multiplier;
        }
      });
      // Prestige multiplier
      cookiesPerClick *= (1 + prestigePoints * 0.5);
    }

    // Update display
    function updateDisplay() {
      document.getElementById('cookieCount').textContent = formatNumber(cookies) + ' üç™';
      document.getElementById('cps').textContent = formatNumber(cookiesPerSecond) + ' per second';
      document.getElementById('multiplier').textContent = '√ó' + formatNumber(cookiesPerClick) + ' per click';
      document.getElementById('prestigeInfo').innerHTML = 'Prestige Points: <strong>' + prestigePoints + '</strong>';
      
      // Update timer
      const timerEl = document.getElementById('timerValue');
      timerEl.textContent = formatTime(timeLeft);
      const timerContainer = document.getElementById('timer');
      if (timeLeft <= 10) {
        timerContainer.classList.add('warning');
      } else {
        timerContainer.classList.remove('warning');
      }
      
      // Update stats
      document.getElementById('totalEarned').textContent = formatNumber(totalCookiesAllTime) + ' üç™';
      document.getElementById('totalClicks').textContent = formatNumber(totalClicks);
      document.getElementById('bestRun').textContent = formatNumber(bestRun) + ' üç™';
      document.getElementById('perClickStat').textContent = formatNumber(cookiesPerClick);
      document.getElementById('upgradesBought').textContent = upgradesBought;
      
      const nextPrestigeAt = 1000000 * Math.pow(10, prestigePoints);
      document.getElementById('nextPrestige').innerHTML = 'Next at: <strong>' + formatNumber(nextPrestigeAt) + '</strong> total cookies';
      document.getElementById('prestigeBtn').disabled = totalCookiesAllTime < nextPrestigeAt;
    }

    // Render shop
    function renderShop() {
      const upgradesDiv = document.getElementById('upgrades');
      upgradesDiv.innerHTML = '';

      // Click upgrades
      clickUpgrades.forEach(upgrade => {
        if (!upgrade.bought) {
          const div = document.createElement('div');
          div.className = 'upgrade' + (cookies >= upgrade.cost ? ' affordable' : '');
          div.innerHTML = `
            <div class="upgrade-header">
              <div class="upgrade-name">
                <span class="upgrade-icon">‚ú®</span>
                ${upgrade.name}
              </div>
            </div>
            <div class="upgrade-desc">Multiplies click power by ${upgrade.multiplier}x</div>
            <div class="upgrade-footer">
              <div class="upgrade-cost">üç™ ${formatNumber(upgrade.cost)}</div>
            </div>
          `;
          div.onclick = () => buyClickUpgrade(upgrade);
          upgradesDiv.appendChild(div);
        }
      });

      // Production upgrades
      upgradeTypes.forEach(upgrade => {
        const cost = calculateCost(upgrade.baseCost, upgrade.count);
        const production = upgrade.baseProduction * (1 + prestigePoints * 0.5);
        
        const div = document.createElement('div');
        div.className = 'upgrade' + (cookies >= cost ? ' affordable' : '');
        div.innerHTML = `
          <div class="upgrade-header">
            <div class="upgrade-name">
              <span class="upgrade-icon">${upgrade.icon}</span>
              ${upgrade.name}
            </div>
            <div class="upgrade-count">${upgrade.count}</div>
          </div>
          <div class="upgrade-desc">${upgrade.description}</div>
          <div class="upgrade-footer">
            <div class="upgrade-cost">üç™ ${formatNumber(cost)}</div>
            <div class="upgrade-production">+${formatNumber(production)}/s</div>
          </div>
        `;
        div.onclick = () => buyUpgrade(upgrade);
        upgradesDiv.appendChild(div);
      });
    }

    // Buy upgrade
    function buyUpgrade(upgrade) {
      if (!gameActive) return;
      
      const cost = calculateCost(upgrade.baseCost, upgrade.count);
      if (cookies >= cost) {
        cookies -= cost;
        upgrade.count++;
        upgradesBought++;
        calculateCPS();
        playSound(600);
        updateDisplay();
        renderShop();
      }
    }

    // Buy click upgrade
    function buyClickUpgrade(upgrade) {
      if (!gameActive) return;
      
      if (cookies >= upgrade.cost && !upgrade.bought) {
        cookies -= upgrade.cost;
        upgrade.bought = true;
        upgradesBought++;
        calculateClickPower();
        playSound(800);
        showAchievement('‚ö° ' + upgrade.name + ' Unlocked!');
        updateDisplay();
        renderShop();
      }
    }

    // Click cookie
    document.getElementById('cookieBtn').addEventListener('click', (e) => {
      if (!gameActive) return;
      
      cookies += cookiesPerClick;
      totalCookiesAllTime += cookiesPerClick;
      totalClicks++;
      
      // Update best run
      if (cookies > bestRun) {
        bestRun = cookies;
      }
      
      // Particle effect
      createParticle(e.clientX, e.clientY, '+' + formatNumber(cookiesPerClick));
      
      // Sound
      playSound(440);
      
      // Check achievements
      checkAchievements();
      
      updateDisplay();
      renderShop();
    });

    // Create floating particle
    function createParticle(x, y, text) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.textContent = text;
      particle.style.left = x + 'px';
      particle.style.top = y + 'px';
      document.body.appendChild(particle);
      setTimeout(() => particle.remove(), 1000);
    }

    // Show achievement
    function showAchievement(text) {
      const achievement = document.createElement('div');
      achievement.className = 'achievement';
      achievement.textContent = text;
      document.body.appendChild(achievement);
      setTimeout(() => achievement.remove(), 3000);
    }

    // Check achievements
    function checkAchievements() {
      achievements.forEach(ach => {
        if (totalCookiesAllTime >= ach.cookies && !achievementsUnlocked.includes(ach.cookies)) {
          achievementsUnlocked.push(ach.cookies);
          showAchievement(ach.text);
          playSound(1000);
          saveGame();
        }
      });
    }

    // Prestige
    document.getElementById('prestigeBtn').addEventListener('click', () => {
      if (!gameActive) return;
      
      const nextPrestigeAt = 1000000 * Math.pow(10, prestigePoints);
      if (totalCookiesAllTime >= nextPrestigeAt) {
        if (confirm('Reset everything for +1 Prestige Point?\n\nThis gives permanent √ó' + (1 + (prestigePoints + 1) * 0.5) + ' multiplier on everything!')) {
          // Save best run before resetting
          if (cookies > bestRun) {
            bestRun = cookies;
          }
          
          prestigePoints++;
          cookies = 0;
          upgradeTypes.forEach(u => u.count = 0);
          clickUpgrades.forEach(u => u.bought = false);
          calculateCPS();
          calculateClickPower();
          updateDisplay();
          renderShop();
          saveGame();
          showAchievement('‚≠ê PRESTIGE LEVEL ' + prestigePoints + '! ‚≠ê');
        }
      }
    });

    // Game over
    function endGame() {
      gameActive = false;
      clearInterval(timerInterval);
      
      // Update best run
      if (cookies > bestRun) {
        bestRun = cookies;
      }
      
      // Save total stats
      saveGame();
      
      // Show game over screen
      document.getElementById('finalCookies').textContent = formatNumber(cookies) + ' üç™';
      document.getElementById('finalClickCount').textContent = formatNumber(totalClicks);
      document.getElementById('finalCPS').textContent = formatNumber(cookiesPerSecond);
      document.getElementById('finalUpgrades').textContent = upgradesBought;
      document.getElementById('finalPrestige').textContent = prestigePoints + ' ‚≠ê';
      
      document.getElementById('gameOverScreen').classList.add('show');
      
      // Play end sound
      playSound(300);
      setTimeout(() => playSound(250), 200);
    }

    // Select time from preset options
    function selectTime(seconds) {
      selectedTime = seconds;
      // Update the custom input to reflect selected time
      const minutes = seconds / 60;
      if (minutes >= 1) {
        document.getElementById('customMinutes').value = Math.round(minutes);
      } else {
        document.getElementById('customMinutes').value = 1;
      }
      // Start game immediately
      startNewGame();
    }

    // Start game with custom time
    function startGameWithCustomTime() {
      const customMinutes = parseInt(document.getElementById('customMinutes').value) || 2;
      selectedTime = customMinutes * 60;
      startNewGame();
    }

    // Start a new game
    function startNewGame() {
      // Reset game state
      cookies = 0;
      cookiesPerClick = 1;
      cookiesPerSecond = 0;
      upgradesBought = 0;
      timeLeft = selectedTime;
      gameActive = true;
      
      upgradeTypes.forEach(u => u.count = 0);
      clickUpgrades.forEach(u => u.bought = false);
      
      calculateCPS();
      calculateClickPower();
      updateDisplay();
      renderShop();
      
      document.getElementById('timerSelectScreen').classList.add('hidden');
      document.getElementById('gameOverScreen').classList.remove('show');
      
      // Start timer
      startTimer();
    }

    // Restart game (show timer select again)
    document.getElementById('restartGame').addEventListener('click', () => {
      document.getElementById('gameOverScreen').classList.remove('show');
      document.getElementById('timerSelectScreen').classList.remove('hidden');
    });

    // Timer countdown
    function startTimer() {
      if (timerInterval) clearInterval(timerInterval);
      
      timerInterval = setInterval(() => {
        if (!gameActive) return;
        
        timeLeft--;
        updateDisplay();
        
        if (timeLeft <= 0) {
          endGame();
        }
      }, 1000);
    }

    // Passive income
    setInterval(() => {
      if (cookiesPerSecond > 0) {
        cookies += cookiesPerSecond / 10;
        totalCookiesAllTime += cookiesPerSecond / 10;
        updateDisplay();
        checkAchievements();
      }
    }, 100);

    // Auto-save
    setInterval(saveGame, 5000);

    // Sound
    let audioContext;
    function playSound(freq) {
      try {
        if (!audioContext) {
          audioContext = new (window.AudioContext || window.webkitAudioContext)();
        }
        const osc = audioContext.createOscillator();
        const gain = audioContext.createGain();
        osc.connect(gain);
        gain.connect(audioContext.destination);
        osc.frequency.value = freq;
        osc.type = 'sine';
        gain.gain.setValueAtTime(0.1, audioContext.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
        osc.start(audioContext.currentTime);
        osc.stop(audioContext.currentTime + 0.1);
      } catch(e) {}
    }

    // Initialize
    loadGame();
    updateDisplay();
    renderShop();
    // Don't start timer yet - wait for user to select time
  </script>
</body>
</html>
